(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d008b750"],{"00fe":function(t,e,a){"use strict";var n=a("7a23"),i=Object(n["withScopeId"])("data-v-7753c9a0");Object(n["pushScopeId"])("data-v-7753c9a0");var r={class:"crumbs"},c=Object(n["createVNode"])("i",{class:"el-icon-lx-calendar"},null,-1),o={class:"fontStyle"};Object(n["popScopeId"])();var s=i((function(t,e,a,s,l,h){var m=Object(n["resolveComponent"])("el-breadcrumb-item"),d=Object(n["resolveComponent"])("el-breadcrumb"),u=Object(n["resolveComponent"])("el-col"),f=Object(n["resolveComponent"])("el-row");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])(f,null,{default:i((function(){return[Object(n["createVNode"])(u,{span:18},{default:i((function(){return[Object(n["createVNode"])(d,{separator:"/"},{default:i((function(){return[Object(n["createVNode"])(m,null,{default:i((function(){return[c,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(a.menu),1)]})),_:1}),Object(n["createVNode"])(m,null,{default:i((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(a.subMenu),1)]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(u,{span:6},{default:i((function(){return[Object(n["createVNode"])("div",o,Object(n["toDisplayString"])(h.time),1)]})),_:1})]})),_:1})])})),l={props:["menu","subMenu"],data:function(){return{}},computed:{time:function(){return"数据更新时间： ".concat(this.$moment().format("YYYY-MM-DD HH:mm:ss"))}}};a("761d");l.render=s,l.__scopeId="data-v-7753c9a0";e["a"]=l},1148:function(t,e,a){"use strict";var n=a("a691"),i=a("1d80");t.exports="".repeat||function(t){var e=String(i(this)),a="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},"343b":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),i=Object(n["withScopeId"])("data-v-2f9f7155");Object(n["pushScopeId"])("data-v-2f9f7155");var r={class:"container sql"},c={class:"block"},o={ref:"myEchart1",style:{height:"350px",width:"100%"}},s={ref:"myEchart2",style:{height:"350px",width:"100%"}};Object(n["popScopeId"])();var l=i((function(t,e,a,l,h,m){var d=Object(n["resolveComponent"])("crumbs"),u=Object(n["resolveComponent"])("market"),f=Object(n["resolveComponent"])("el-col"),b=Object(n["resolveComponent"])("index-select"),p=Object(n["resolveComponent"])("time-select"),g=Object(n["resolveComponent"])("el-date-picker"),v=Object(n["resolveComponent"])("el-row"),y=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",null,[Object(n["createVNode"])(d,{menu:"商场流量",subMenu:"流量概况"}),Object(n["createVNode"])("div",r,[Object(n["createVNode"])(v,null,{default:i((function(){return[Object(n["createVNode"])(f,{span:5},{default:i((function(){return[Object(n["createVNode"])(u,{onMarketGet:m.marketGet},null,8,["onMarketGet"])]})),_:1}),Object(n["createVNode"])(f,{span:5},{default:i((function(){return[Object(n["createVNode"])(b,{indexSet:h.index,onIndexGet:m.indexGet},null,8,["indexSet","onIndexGet"])]})),_:1}),Object(n["createVNode"])(f,{span:7,offset:1},{default:i((function(){return[Object(n["createVNode"])(p,{onTimeGet:m.timeGet,style:{width:"100%","margin-left":"20px"}},null,8,["onTimeGet"])]})),_:1}),Object(n["createVNode"])(f,{span:5},{default:i((function(){return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(g,{onChange:m.changeTime,style:{width:"100%"},disabled:h.datePickerAble,modelValue:h.timeRange,"onUpdate:modelValue":e[1]||(e[1]=function(t){return h.timeRange=t}),type:"daterange",clearable:"false",shortcuts:h.shortcuts,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","disabled-date":h.disabledDate,align:"right"},null,8,["onChange","disabled","modelValue","shortcuts","disabled-date"])])]})),_:1})]})),_:1})]),Object(n["createVNode"])(y,{header:"同比增长图",style:{"font-weight":"bold","margin-top":"10px"}},{default:i((function(){return[Object(n["createVNode"])("div",o,null,512)]})),_:1}),Object(n["createVNode"])(y,{header:"环比增长图",style:{"font-weight":"bold","margin-top":"10px"}},{default:i((function(){return[Object(n["createVNode"])("div",s,null,512)]})),_:1})])])})),h=(a("fb6a"),a("b680"),a("00fe")),m=a("3660"),d=a("9255"),u=Object(n["withScopeId"])("data-v-60175f9c");Object(n["pushScopeId"])("data-v-60175f9c");var f=Object(n["createVNode"])("span",{id:"text"},"时间选择:",-1);Object(n["popScopeId"])();var b=u((function(t,e,a,i,r,c){var o=Object(n["resolveComponent"])("el-radio-button"),s=Object(n["resolveComponent"])("el-radio-group");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[f,Object(n["createVNode"])(s,{modelValue:r.dateTime,"onUpdate:modelValue":e[1]||(e[1]=function(t){return r.dateTime=t}),onChange:c.submitTime,style:c.widthSet},{default:u((function(){return[Object(n["createVNode"])(o,{label:"近7日"}),Object(n["createVNode"])(o,{label:"近30日"}),Object(n["createVNode"])(o,{label:"近1年"}),Object(n["createVNode"])(o,{label:"自定义时间"})]})),_:1},8,["modelValue","onChange","style"])])})),p={props:["timeSet"],data:function(){return{businessValue:"",businessList:[],dateTime:"近7日",textWidth:""}},components:{},mounted:function(){this.textWidth=document.getElementById("text").offsetWidth},methods:{submitTime:function(t){this.$emit("timeGet",t)}},computed:{widthSet:function(){return"width:calc(90% - ".concat(this.textWidth,"px);")}},watch:{timeSet:function(t){this.dataTime=t}}};a("9bca");p.render=b,p.__scopeId="data-v-60175f9c";var g=p,v=a("313e"),y=a("bc3a"),x=a.n(y),O={data:function(){var t=this;return{marketName:"",indexName:"客流量",datePickerAble:!0,time:"近7日",index:[{value:"客流量",label:"客流量"},{value:"集客力",label:"集客力"},{value:"提袋率",label:"提袋率"},{value:"游逛深度",label:"游逛深度"}],shortcuts:[{text:"最近一周",value:function(){var e=new Date,a=new Date;return a.setTime(a.getTime()-6048e5),[t.$moment().subtract(7,"days"),e]}()},{text:"最近30天",value:function(){var e=new Date,a=new Date;return a.setMonth(a.get),a.setTime(a.getTime()-2592e6),[t.$moment().subtract(1,"months"),e]}()},{text:"最近一年",value:function(){var e=new Date,a=new Date;return a.setFullYear(a.getFullYear()-1),[t.$moment().subtract(1,"years"),e]}()}],timeRange:"",screenWidth:document.body.clientWidth,chart1:{},chartData1:[],chart2:{},chartData2:[],disabledDate:function(e){return e.getTime()>t.$moment()}}},methods:{marketGet:function(t){this.marketName=t},indexGet:function(t){this.indexName=t},timeGet:function(t){console.log(t),console.log(this.timeRange),this.time=t,this.datePickerAble="自定义时间"!=t},timeIntval:function(t,e){var a=[],n=this.$moment;t=n(t).format("YYYY-MM-DD"),e=n(e).format("YYYY-MM-DD");while(n(t).isBefore(e))a.push(n(t).format("MM-DD")),t=n(t).add(1,"days").format("YYYY-MM-DD");return a.push(e),a},initChart1:function(t,e){var a=v["b"](t),n={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},dataZoom:[{type:"inside"},{type:"slider"}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},saveAsImage:{show:!0}}},legend:{data:["".concat(this.$moment(this.timeRange[0]).subtract(1,"years").format("YYYY"),"年"),"".concat(this.$moment(this.timeRange[0]).format("YYYY"),"年"),"同比增长"]},xAxis:[{type:"category",data:this.timeIntval(this.timeRange[0],this.timeRange[1]),axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:this.indexName,axisLabel:{formatter:"{value}"}},{type:"value",name:"同比增长",axisLabel:{formatter:"{value} %"}}],series:e};return console.log(n.legend.data),console.log(n.series),a.setOption(n),a},initChart2:function(t,e){var a=v["b"](t),n={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},dataZoom:[{type:"inside"},{type:"slider"}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},saveAsImage:{show:!0}}},legend:{data:["上期","当前期","环比增长"],selected:{"上期":!1}},xAxis:[{type:"category",data:this.timeIntval(this.timeRange[0],this.timeRange[1]),axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:this.indexName,axisLabel:{formatter:"{value}"}},{type:"value",name:"环比增长",axisLabel:{formatter:"{value} %"}}],series:e};return console.log(n.legend.data),console.log(n.series),a.setOption(n),a},changeTime:function(){var t=this;this.chart1.clear(),this.chartData1=[],console.log(this.timeIntval(this.timeRange[0],this.timeRange[1]).length),"提袋率"==this.indexName?(x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1.push({name:"".concat(t.$moment(t.timeRange[0]).subtract(1,"years").format("YYYY"),"年"),type:"bar",data:e.data.rate.data}),t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)})),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1[1]={name:"".concat(t.$moment(t.timeRange[0]).format("YYYY"),"年"),type:"bar",data:e.data.rate.data},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1),t.chartData1[2]={name:"同比增长",type:"line",yAxisIndex:1,data:t.rate,symbol:"none"},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)}))):(x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1.push({name:"".concat(t.$moment(t.timeRange[0]).subtract(1,"years").format("YYYY"),"年"),type:"bar",data:e.data.list.data}),t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)})),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1[1]={name:"".concat(t.$moment(t.timeRange[0]).format("YYYY"),"年"),type:"bar",data:e.data.list.data},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1),t.chartData1[2]={name:"同比增长",type:"line",yAxisIndex:1,data:t.rate,symbol:"none"},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)}))),this.changeTime2()},changeTime2:function(){var t=this;this.chart2.clear(),this.chartData2=[],console.log(this.timeIntval(this.timeRange[0],this.timeRange[1]).length),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length+1)).then((function(e){"提袋率"==t.indexName?(t.chartData2.push({name:"上期",type:"bar",data:e.data.rate.data}),t.chartData2.push({name:"当前期",type:"bar",data:e.data.rate.data.slice(1)}),t.chartData2.push({name:"环比增长",type:"line",yAxisIndex:1,data:t.rate2,symbol:"none"})):(t.chartData2.push({name:"上期",type:"bar",data:e.data.list.data}),t.chartData2.push({name:"当前期",type:"bar",data:e.data.list.data.slice(1)}),t.chartData2.push({name:"环比增长",type:"line",yAxisIndex:1,data:t.rate2,symbol:"none"})),t.chart2=t.initChart2(t.$refs.myEchart2,t.chartData2)}))}},mounted:function(){var t=this;this.timeRange=[this.$moment().subtract(7,"days").format(),this.$moment()];var e=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth}()},"提袋率"==this.indexName?(x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1.push({name:"".concat(t.$moment(t.timeRange[0]).subtract(1,"years").format("YYYY"),"年"),type:"bar",data:e.data.rate.data}),t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)})),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1[1]={name:"".concat(t.$moment(t.timeRange[0]).format("YYYY"),"年"),type:"bar",data:e.data.rate.data},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1),t.chartData1[2]={name:"同比增长",type:"line",yAxisIndex:1,data:t.rate,symbol:"none"},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)}))):(x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1.push({name:"".concat(t.$moment(t.timeRange[0]).subtract(1,"years").format("YYYY"),"年"),type:"bar",data:e.data.list.data}),t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)})),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length)).then((function(e){t.chartData1[1]={name:"".concat(t.$moment(t.timeRange[0]).format("YYYY"),"年"),type:"bar",data:e.data.list.data},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1),t.chartData1[2]={name:"同比增长",type:"line",yAxisIndex:1,data:t.rate,symbol:"none"},t.chart1=t.initChart1(t.$refs.myEchart1,t.chartData1)}))),x()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getTrafficProfile?lg=".concat(this.timeIntval(this.timeRange[0],this.timeRange[1]).length+1)).then((function(e){"提袋率"==t.indexName?(t.chartData2.push({name:"上期",type:"bar",data:e.data.rate.data}),t.chartData2.push({name:"当前期",type:"bar",data:e.data.rate.data.slice(1)}),t.chartData2.push({name:"环比增长",type:"line",yAxisIndex:1,data:t.rate2,symbol:"none"})):(t.chartData2.push({name:"上期",type:"bar",data:e.data.list.data}),t.chartData2.push({name:"当前期",type:"bar",data:e.data.list.data.slice(1)}),t.chartData2.push({name:"环比增长",type:"line",yAxisIndex:1,data:t.rate2,symbol:"none"})),t.chart2=t.initChart2(t.$refs.myEchart2,t.chartData2)}))},components:{crumbs:h["a"],market:m["a"],indexSelect:d["a"],timeSelect:g},watch:{time:function(t){"近7日"===t&&(this.timeRange=[this.$moment().subtract(7,"days"),this.$moment()]),"近30日"===t&&(this.timeRange=[this.$moment().subtract(1,"months"),this.$moment()]),"近1年"===t&&(this.timeRange=[this.$moment().subtract(1,"year"),this.$moment()]),this.changeTime(),this.changeTime2()},indexName:function(){this.changeTime(),this.changeTime2()},marketName:function(){this.changeTime(),this.changeTime2()},screenWidth:function(t){if(!this.timer){this.screenWidth=t,this.timer=!0;var e=this;setTimeout((function(){console.log(e.screenWidth),e.timer=!1,e.chart1.resize(),e.chart2.resize()}),400)}}},computed:{rate:function(){var t=[];console.log(this.chartData1[0].data);for(var e=0;e<this.chartData1[0].data.length;e++)t.push((100*((this.chartData1[0].data[e]-this.chartData1[1].data[e])/this.chartData1[1].data[e]).toFixed(4)).toFixed(2));return console.log(t),t},rate2:function(){var t=[];console.log(this.chartData2[0].data);for(var e=0;e<this.chartData2[0].data.length;e++)t.push((100*((this.chartData2[0].data[e]-this.chartData2[1].data[e])/this.chartData2[1].data[e]).toFixed(4)).toFixed(2));return console.log(t),t}}};O.render=l,O.__scopeId="data-v-2f9f7155";e["default"]=O},"408a":function(t,e,a){var n=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"761d":function(t,e,a){"use strict";a("e28a")},9255:function(t,e,a){"use strict";var n=a("7a23"),i=Object(n["withScopeId"])("data-v-3b9da70c");Object(n["pushScopeId"])("data-v-3b9da70c");var r=Object(n["createVNode"])("span",{id:"text"},"指标名称:",-1);Object(n["popScopeId"])();var c=i((function(t,e,a,c,o,s){var l=Object(n["resolveComponent"])("el-option"),h=Object(n["resolveComponent"])("el-select");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[r,Object(n["createVNode"])(h,{modelValue:o.indexValue,"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.indexValue=t}),placeholder:"请选择",style:s.widthSet,onChange:s.submitIndex,filterable:""},{default:i((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(a.indexSet,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","style","onChange"])])})),o={props:["indexSet"],data:function(){return{indexValue:"客流量",indexList:[],textWidth:""}},components:{},mounted:function(){this.textWidth=document.getElementById("text").offsetWidth},methods:{submitIndex:function(t){this.$emit("indexGet",t)}},computed:{widthSet:function(){return"width:calc(90% - ".concat(this.textWidth,"px);")}},watch:{indexSet:function(t){this.indexValue=t}}};o.render=c,o.__scopeId="data-v-3b9da70c";e["a"]=o},"9bca":function(t,e,a){"use strict";a("c808")},b680:function(t,e,a){"use strict";var n=a("23e7"),i=a("a691"),r=a("408a"),c=a("1148"),o=a("d039"),s=1..toFixed,l=Math.floor,h=function(t,e,a){return 0===e?a:e%2===1?h(t,e-1,a*t):h(t*t,e/2,a)},m=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},d=function(t,e,a){var n=-1,i=a;while(++n<6)i+=e*t[n],t[n]=i%1e7,i=l(i/1e7)},u=function(t,e){var a=6,n=0;while(--a>=0)n+=t[a],t[a]=l(n/e),n=n%e*1e7},f=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var n=String(t[e]);a=""===a?n:a+c.call("0",7-n.length)+n}return a},b=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){s.call({})}));n({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,a,n,o,s=r(this),l=i(t),b=[0,0,0,0,0,0],p="",g="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=m(s*h(2,69,1))-69,a=e<0?s*h(2,-e,1):s/h(2,e,1),a*=4503599627370496,e=52-e,e>0){d(b,0,a),n=l;while(n>=7)d(b,1e7,0),n-=7;d(b,h(10,n,1),0),n=e-1;while(n>=23)u(b,1<<23),n-=23;u(b,1<<n),d(b,1,1),u(b,2),g=f(b)}else d(b,0,a),d(b,1<<-e,0),g=f(b)+c.call("0",l);return l>0?(o=g.length,g=p+(o<=l?"0."+c.call("0",l-o)+g:g.slice(0,o-l)+"."+g.slice(o-l))):g=p+g,g}})},c808:function(t,e,a){},e28a:function(t,e,a){},fb6a:function(t,e,a){"use strict";var n=a("23e7"),i=a("861d"),r=a("e8b5"),c=a("23cb"),o=a("50c4"),s=a("fc6a"),l=a("8418"),h=a("b622"),m=a("1dde"),d=m("slice"),u=h("species"),f=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var a,n,h,m=s(this),d=o(m.length),p=c(t,d),g=c(void 0===e?d:e,d);if(r(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?i(a)&&(a=a[u],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return f.call(m,p,g);for(n=new(void 0===a?Array:a)(b(g-p,0)),h=0;p<g;p++,h++)p in m&&l(n,h,m[p]);return n.length=h,n}})}}]);
//# sourceMappingURL=chunk-d008b750.8c21a1ed.js.map