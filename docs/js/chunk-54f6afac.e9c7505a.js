(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f6afac"],{"5db5":function(e,t,a){},9624:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("fb6a");var n=a("7a23"),r=Object(n["withScopeId"])("data-v-73833f8c");Object(n["pushScopeId"])("data-v-73833f8c");var o={class:"container sql"},l=Object(n["createVNode"])("span",null,"楼层选择:",-1),c=Object(n["createVNode"])("span",{id:"text"},"排行选择:",-1),u=Object(n["createTextVNode"])("查询"),i=Object(n["createTextVNode"])("重置"),s=Object(n["createTextVNode"])("导出"),d={ref:"shopRank",style:{height:"600px",width:"100%"}},b={class:"card-header"},f=Object(n["createVNode"])("span",{class:"text fontCenter"},"时间",-1),p=Object(n["createVNode"])("span",{class:"text fontCenter"},"标签",-1),m={class:"pagination flexCenter"},h=Object(n["createVNode"])("div",{id:"test",style:{height:"600px",width:"100%"}},null,-1);Object(n["popScopeId"])();var g=r((function(e,t,a,g,j,O){var v=Object(n["resolveComponent"])("crumbs"),N=Object(n["resolveComponent"])("market"),V=Object(n["resolveComponent"])("el-col"),k=Object(n["resolveComponent"])("el-option"),y=Object(n["resolveComponent"])("el-select"),C=Object(n["resolveComponent"])("el-button"),w=Object(n["resolveComponent"])("export-excel"),_=Object(n["resolveComponent"])("el-row"),x=Object(n["resolveComponent"])("el-affix"),D=Object(n["resolveComponent"])("el-card"),S=Object(n["resolveComponent"])("el-radio-button"),B=Object(n["resolveComponent"])("el-radio-group"),R=Object(n["resolveComponent"])("el-date-picker"),z=Object(n["resolveComponent"])("el-tag"),T=Object(n["resolveComponent"])("el-table-column"),L=Object(n["resolveComponent"])("el-table"),A=Object(n["resolveComponent"])("el-pagination");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(v,{menu:"店铺客流",subMenu:"店铺关联"}),Object(n["createVNode"])(x,{offset:100},{default:r((function(){return[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(_,{type:"flex",justify:"space-around"},{default:r((function(){return[Object(n["createVNode"])(V,{span:5},{default:r((function(){return[Object(n["createVNode"])(N,{onMarketGet:O.marketGet,marketSet:j.marketName},null,8,["onMarketGet","marketSet"])]})),_:1}),Object(n["createVNode"])(V,{span:7},{default:r((function(){return[l,Object(n["createVNode"])(y,{modelValue:j.areaName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.areaName=e}),placeholder:"请选择",style:e.widthSet,filterable:""},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.areaList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","style"])]})),_:1}),Object(n["createVNode"])(V,{span:5},{default:r((function(){return[Object(n["createVNode"])("div",null,[c,Object(n["createVNode"])(y,{modelValue:j.rankValue,"onUpdate:modelValue":t[2]||(t[2]=function(e){return j.rankValue=e}),placeholder:"请选择",filterable:"",style:e.widthSet},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.rankList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","style"])])]})),_:1}),Object(n["createVNode"])(V,{span:5},{default:r((function(){return[Object(n["createVNode"])(C,{type:"primary",icon:"el-icon-search",onClick:O.onQuery},{default:r((function(){return[u]})),_:1},8,["onClick"]),Object(n["createVNode"])(C,{type:"primary",icon:"el-icon-refresh-right",onClick:O.reSet},{default:r((function(){return[i]})),_:1},8,["onClick"]),Object(n["createVNode"])(w,{"file-name":"店铺关联",header:["排行","店铺名称","关联度","所属楼层","标签"],"filter-filed":["rank","shopName","shopRate","floor","tags"],data:j.tableData},{default:r((function(){return[s]})),_:1},8,["data"])]})),_:1})]})),_:1})])]})),_:1}),Object(n["createVNode"])(_,null,{default:r((function(){return[Object(n["createVNode"])(V,{span:12},{default:r((function(){return[Object(n["createVNode"])(D,{header:"店铺排行清单",style:{"font-weight":"bold","margin-top":"10px"}},{default:r((function(){return[Object(n["createVNode"])("div",d,null,512)]})),_:1})]})),_:1}),Object(n["createVNode"])(V,{span:12},{default:r((function(){return[Object(n["createVNode"])(D,{class:"marginTop10 marginLeft10",shadow:"hover"},{header:r((function(){return[Object(n["createVNode"])("div",b,[Object(n["createVNode"])(_,null,{default:r((function(){return[Object(n["createVNode"])(_,null,{default:r((function(){return[Object(n["createVNode"])(V,{span:2},{default:r((function(){return[f]})),_:1}),Object(n["createVNode"])(V,{span:22},{default:r((function(){return[Object(n["createVNode"])(_,null,{default:r((function(){return[Object(n["createVNode"])(V,{span:14},{default:r((function(){return[Object(n["createVNode"])(B,{modelValue:j.time,"onUpdate:modelValue":t[3]||(t[3]=function(e){return j.time=e})},{default:r((function(){return[Object(n["createVNode"])(S,{label:"近7日"}),Object(n["createVNode"])(S,{label:"近30日"}),Object(n["createVNode"])(S,{label:"近1年"}),Object(n["createVNode"])(S,{label:"自定义时间"})]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(V,{span:8},{default:r((function(){return[Object(n["createVNode"])(R,{style:{width:"100%"},disabled:j.datePickerAble,modelValue:j.timeRange,"onUpdate:modelValue":t[4]||(t[4]=function(e){return j.timeRange=e}),type:"daterange",shortcuts:j.shortcuts,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},null,8,["disabled","modelValue","shortcuts"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{style:{width:"100%"},class:"marginTop10"},{default:r((function(){return[Object(n["createVNode"])(V,{span:2},{default:r((function(){return[p]})),_:1}),Object(n["createVNode"])(V,{span:8},{default:r((function(){return[Object(n["createVNode"])(y,{modelValue:j.tags.value,"onUpdate:modelValue":t[5]||(t[5]=function(e){return j.tags.value=e}),multiple:"",placeholder:"请选择","collapse-tags":"",onChange:O.multipleChange},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.tags.options,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(n["createVNode"])(V,{span:8},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(O.tagGet,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(z,{onClose:function(t){return O.handleClose(e.name)},key:e.name,closable:"",type:e.type},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["onClose","type"])})),128))]})),_:1})]})),_:1})]})),_:1})])]})),default:r((function(){return[Object(n["createVNode"])(_,null,{default:r((function(){return[Object(n["createVNode"])(L,{class:"font-set",data:j.tableData.slice((j.currentPage-1)*j.pagesize,j.currentPage*j.pagesize),style:{width:"100%","margin-bottom":"10px","margin-top":"10px","font-size":"9px"},"row-key":"id",border:"","current-page":j.currentPage,"max-height":"438",stripe:"",onSortChange:O.sort_change},{default:r((function(){return[Object(n["createVNode"])(T,{prop:"rank",label:"排行",sortable:"",align:"center"}),Object(n["createVNode"])(T,{prop:"shopName",label:"店铺名称",sortable:"",align:"center"}),Object(n["createVNode"])(T,{prop:"shopRate",label:"关联度",sortable:"",formatter:O.formatter,align:"center"},null,8,["formatter"]),Object(n["createVNode"])(T,{prop:"floor",label:"所属楼层",sortable:"",align:"center"}),Object(n["createVNode"])(T,{prop:"tags",label:"标签",sortable:"",align:"center"},{default:r((function(e){return[Object(n["createVNode"])(z,{type:"success","close-transition":""},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.row.tags),1)]})),_:2},1024)]})),_:1})]})),_:1},8,["data","current-page","onSortChange"])]})),_:1}),Object(n["createVNode"])("div",m,[Object(n["createVNode"])(A,{class:"flexCenter",onSizeChange:O.handleSizeChange,onCurrentChange:O.handleCurrentChange,"page-sizes":[10],"page-size":j.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:j.total},null,8,["onSizeChange","onCurrentChange","page-size","total"])])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(D,null,{default:r((function(){return[h]})),_:1})])})),j=(a("99af"),a("a434"),a("4de4"),a("a15b"),a("159b"),a("d81d"),a("00fe")),O=a("3660"),v=a("bc3a"),N=a.n(v),V=a("313e"),k=a("a7c0"),y={data:function(){return{screenWidth:document.body.clientWidth,marketName:"万达",tableData:[],shopName:[],currentPage:1,pagesize:10,total:0,areaName:"全部",datePickerAble:!0,time:"近7日",timeRange:"",shortcuts:[{text:"最近一周",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"最近一年",value:function(){var e=new Date,t=new Date;return t.setFullYear(t.getFullYear()-1),[t,e]}()}],rankValue:"全部",rankList:[{value:"全部",label:"全部"},{value:"前10位",label:"前10位"},{value:"前50位",label:"前50位"}],tags:{value:[],options:[{value:"标签1",label:"标签1"},{value:"标签2",label:"标签2"},{value:"标签3",label:"标签3"},{value:"标签4",label:"标签4"},{value:"标签5",label:"标签5"}]},areaList:[{value:"全部",label:"全部"},{value:"楼层1",label:"楼层1"},{value:"楼层2",label:"楼层2"},{value:"楼层3",label:"楼层3"},{value:"楼层4",label:"楼层4"},{value:"楼层5",label:"楼层5"}],chart:{},chartData:[]}},methods:{reSet:function(){this.marketName="万达",this.areaName="全部",this.rankValue="全部",this.time="近7日",this.onQuery()},formatter:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return[].concat(t)[2]+"%"},sort_change:function(e){console.log(e),"ascending"==e.order?this.tableData.sort((function(t,a){return t[e.prop]-a[e.prop]})):"descending"==e.order?this.tableData.sort((function(t,a){return a[e.prop]-t[e.prop]})):this.tableData.sort((function(e,t){return e.rank-t.rank}))},marketGet:function(e){this.marketName=e},areaGet:function(e){this.areaName=e},timeGet:function(e){console.log(e),this.time=e,this.datePickerAble="自定义时间"!=e},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},multipleChange:function(){console.log(this.tags.value)},handleClose:function(e){this.tags.value.splice(this.tags.value.indexOf(e),1)},onQuery:function(){var e=this;N()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getAss").then((function(t){e.shopName=[];var a=t.data.list;"全部"!=e.areaName&&(a=a.filter((function(t){return e.areaName==t.floor}))),e.tags.value.length>0&&(a=a.filter((function(t){return-1!=e.tags.value.indexOf(t.tags)}))),a=a.sort((function(e,t){return t.shopRate-e.shopRate}));for(var n=0;n<a.length;n++)a[n].rank=n+1;"前10位"==e.rankValue&&a.length>10&&(a=a.slice(0,9)),"前50位"==e.rankValue&&a.length>50&&(a=a.slice(0,49)),e.tableData=a,e.total=e.tableData.length;for(var r=[],o=0;o<e.tableData.length;o++)e.shopName.push(e.tableData[o].shopName),r.push({value:e.tableData[o].shopRate,name:e.tableData[o].shopName});e.chartData=[{name:"店铺",type:"pie",radius:[40,230],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:r}],e.chart=e.initChart(e.$refs.shopRank,e.chartData)}))},initChart:function(e,t){var a=V["b"](e),n={title:{text:this.marketName+" "+this.$moment(this.timeRange[0]).format("YYYY-MM-DD")+"至"+this.$moment(this.timeRange[1]).format("YYYY-MM-DD"),subtext:this.areaName+" "+this.tags.value.join("  "),left:"center"},legend:{type:"scroll",orient:"horizontal",right:10,top:"bottom",bottom:40,data:this.shopName},grid:{containLabel:!0},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0}}},series:t};return a.setOption(n),a}},components:{crumbs:j["a"],market:O["a"],ExportExcel:k["a"]},mounted:function(){var e=this,t=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,t.screenWidth=window.screenWidth}()},this.timeRange=[this.$moment().subtract(7,"days"),this.$moment()],N()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getAss").then((function(t){var a=t.data.list;"全部"!=e.areaName&&(a=a.filter((function(t){return e.areaName==t.floor}))),a=a.sort((function(e,t){return t.shopRate-e.shopRate}));for(var n=0;n<a.length;n++)a[n].rank=n+1;e.tableData=a,e.total=e.tableData.length;for(var r=[],o=0;o<e.tableData.length;o++)e.shopName.push(e.tableData[o].shopName),r.push({value:e.tableData[o].shopRate,name:e.tableData[o].shopName});e.chartData=[{name:"店铺",type:"pie",radius:[40,230],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:r}],e.chart=e.initChart(e.$refs.shopRank,e.chartData)})),N()("https://mock.mengxuegu.com/mock/6076fee5990ff82a18f95b5f/item/getNew").then((function(e){console.log(e.data);var t=document.getElementById("test"),a=V["b"](t),n=e.data;n.nodes.forEach((function(e){e.label={show:e.symbolSize>20}}));var r={title:{text:"Les Miserables",subtext:"Circular layout",top:"bottom",left:"right"},tooltip:{},legend:[{data:n.categories.map((function(e){return e.name}))}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"Les Miserables",type:"graph",layout:"circular",circular:{rotateLabel:!0},data:n.nodes,links:n.links,categories:n.categories,roam:!0,label:{position:"right",formatter:"{b}"},lineStyle:{color:"source",curveness:.3}}]};a.setOption(r)}))},computed:{tagGet:function(){return console.log(this.tags.value.map((function(e){return{name:e,type:""}}))),this.tags.value.map((function(e){return{name:e,type:""}}))}},watch:{tags:function(e){console.log(e)},screenWidth:function(e){if(!this.timer){this.screenWidth=e,this.timer=!0;var t=this;setTimeout((function(){t.timer=!1,t.chart.resize()}),400)}}}};a("d7c6");y.render=g,y.__scopeId="data-v-73833f8c";t["default"]=y},a15b:function(e,t,a){"use strict";var n=a("23e7"),r=a("44ad"),o=a("fc6a"),l=a("a640"),c=[].join,u=r!=Object,i=l("join",",");n({target:"Array",proto:!0,forced:u||!i},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},d7c6:function(e,t,a){"use strict";a("5db5")},fb6a:function(e,t,a){"use strict";var n=a("23e7"),r=a("861d"),o=a("e8b5"),l=a("23cb"),c=a("50c4"),u=a("fc6a"),i=a("8418"),s=a("b622"),d=a("1dde"),b=d("slice"),f=s("species"),p=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var a,n,s,d=u(this),b=c(d.length),h=l(e,b),g=l(void 0===t?b:t,b);if(o(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?r(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return p.call(d,h,g);for(n=new(void 0===a?Array:a)(m(g-h,0)),s=0;h<g;h++,s++)h in d&&i(n,s,d[h]);return n.length=s,n}})}}]);
//# sourceMappingURL=chunk-54f6afac.e9c7505a.js.map